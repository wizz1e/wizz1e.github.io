!function(t,o){"function"==typeof define&&define.amd?define(o):"object"==typeof exports?module.exports=o:t.fluidvids=o()}(this,function(){"use strict";function t(t){return new RegExp("^(https?:)?//(?:"+i.players.join("|")+").*$","i").test(t)}function o(t,o){return parseInt(t,10)/parseInt(o,10)*100+"%"}function e(e){if((t(e.src)||t(e.data))&&!e.getAttribute("data-fluidvids")){var n=document.createElement("div");e.parentNode.insertBefore(n,e),e.className+=(e.className?" ":"")+"fluidvids-item",e.setAttribute("data-fluidvids","loaded"),n.className+="fluidvids",n.style.paddingTop=o(e.height,e.width),n.appendChild(e)}}function n(){var t=document.createElement("div");t.innerHTML="<p>x</p><style>"+a+"</style>",r.appendChild(t.childNodes[1])}var i={selector:["iframe","object"],players:["www.youtube.com","player.vimeo.com"]},a=[".fluidvids {","width: 100%; max-width: 100%; position: relative;","}",".fluidvids-item {","position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;","}"].join(""),r=document.head||document.getElementsByTagName("head")[0];return i.render=function(){for(var t=document.querySelectorAll(i.selector.join()),o=t.length;o--;)e(t[o])},i.init=function(t){for(var o in t)i[o]=t[o];i.render(),n()},i}),function(){!function(t){return t.bigfoot=function(o){var e,n,i,a,r,s,l,d,f,c,u,p,g,h,v,m,b,O,y,w,T,_,C,x,N,F,k;return i=void 0,f={actionOriginalFN:"hide",activateCallback:function(){},activateOnHover:!1,allowMultipleFN:!1,anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,anchorParentTagname:"sup",breakpoints:{},deleteOnUnhover:!1,footnoteParentClass:"footnote",footnoteTagname:"li",hoverDelay:250,numberResetSelector:void 0,popoverDeleteDelay:300,popoverCreateDelay:100,positionContent:!0,preventPageScroll:!0,scope:!1,useFootnoteOnlyOnce:!0,contentMarkup:'<aside class="bigfoot-footnote is-positioned-bottom" data-footnote-number="{{FOOTNOTENUM}}" data-footnote-identifier="{{FOOTNOTEID}}" alt="Footnote {{FOOTNOTENUM}}"> <div class="bigfoot-footnote__wrapper"> <div class="bigfoot-footnote__content"> {{FOOTNOTECONTENT}} </div></div> <div class="bigfoot-footnote__tooltip"></div> </aside>',buttonMarkup:'<div class=\'bigfoot-footnote__container\'> <button class="bigfoot-footnote__button" id="{{SUP:data-footnote-backlink-ref}}" data-footnote-number="{{FOOTNOTENUM}}" data-footnote-identifier="{{FOOTNOTEID}}" alt="See Footnote {{FOOTNOTENUM}}" rel="footnote" data-bigfoot-footnote="{{FOOTNOTECONTENT}}"> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> </button></div>'},C=t.extend(f,o),v={},p=function(){var o,e,n,i,a,r,l,d,f,u,p,g,h,v,m,O,y,T,_,x;for(p=C.scope?""+C.scope+' a[href*="#"]':'a[href*="#"]',n=t(p).filter(function(){var o,e;return o=t(this),e=o.attr("rel"),("null"===e||null==e)&&(e=""),(""+o.attr("href")+e).match(C.anchorPattern)&&o.closest("[class*="+C.footnoteParentClass+"]:not(a):not("+C.anchorParentTagname+")").length<1}),O=[],v=[],f=[],s(n,v),t(v).each(function(){var o,e;return e=t(this).data("footnote-ref").replace(/[:.+~*\]\[]/g,"\\$&"),C.useFootnoteOnlyOnce&&(e=""+e+":not(.footnote-processed)"),o=t(e).closest(C.footnoteTagname),o.length>0?(O.push(o.first().addClass("footnote-processed")),f.push(this)):void 0}),e=t("[data-footnote-identifier]:last"),h=e.length<1?0:+e.data("footnote-identifier"),x=[],y=T=0,_=O.length;_>=0?_>T:T>_;y=_>=0?++T:--T)switch(g=b(t(O[y]).html().trim(),t(f[y]).data("footnote-backlink-ref")),g=g.replace(/"/g,"&quot;").replace(/&lt;/g,"&ltsym;").replace(/&gt;/g,"&gtsym;"),h+=1,u="",l=t(f[y]),d=t(O[y]),null!=C.numberResetSelector?(o=l.closest(C.numberResetSelector),o.is(a)?m+=1:m=1,a=o):m=h,0!==g.indexOf("<")&&(g="<p>"+g+"</p>"),u=C.buttonMarkup.replace(/\{\{FOOTNOTENUM\}\}/g,m).replace(/\{\{FOOTNOTEID\}\}/g,h).replace(/\{\{FOOTNOTECONTENT\}\}/g,g),u=w(u,"SUP",l),u=w(u,"FN",d),i=t(u).insertBefore(l),r=d.parent(),C.actionOriginalFN.toLowerCase()){case"hide":l.addClass("footnote-print-only"),d.addClass("footnote-print-only"),x.push(c(r));break;case"delete":l.remove(),d.remove(),x.push(c(r));break;default:x.push(l.addClass("footnote-print-only"))}return x},s=function(o,e){var n,i,a,r;null==e&&(e=[]),n=void 0,i=void 0,a=void 0,r=void 0,o.each(function(){var o,i;return i=t(this),a="#"+i.attr("href").split("#")[1],n=i.closest(C.anchorParentTagname),o=i.find(C.anchorParentTagname),n.length>0?(r=(n.attr("id")||"")+(i.attr("id")||""),e.push(n.attr({"data-footnote-backlink-ref":r,"data-footnote-ref":a}))):o.length>0?(r=(o.attr("id")||"")+(i.attr("id")||""),e.push(i.attr({"data-footnote-backlink-ref":r,"data-footnote-ref":a}))):(r=i.attr("id")||"",e.push(i.attr({"data-footnote-backlink-ref":r,"data-footnote-ref":a})))})},c=function(t){var o;return o=void 0,t.is(":empty")||0===t.children(":not(.footnote-print-only)").length?(o=t.parent(),"delete"===C.actionOriginalFN.toLowerCase()?t.remove():t.addClass("footnote-print-only"),c(o)):t.children(":not(.footnote-print-only)").length===t.children("hr:not(.footnote-print-only)").length?(o=t.parent(),"delete"===C.actionOriginalFN.toLowerCase()?t.remove():(t.children("hr").addClass("footnote-print-only"),t.addClass("footnote-print-only")),c(o)):void 0},b=function(t,o){var e;return o.indexOf(" ")>=0&&(o=o.trim().replace(/\s+/g,"|").replace(/(.*)/g,"($1)")),e=new RegExp("(\\s|&nbsp;)*<\\s*a[^#<]*#"+o+"[^>]*>(.*?)<\\s*/\\s*a>","g"),t.replace(e,"").replace("[]","")},w=function(t,o,e){var n,i,a,r;for(i=new RegExp("\\{\\{"+o+":([^\\}]*)\\}\\}","g"),n=void 0,r=void 0,a=void 0,n=i.exec(t);n;)n[1]&&(r=e.attr(n[1])||"",t=t.replace("{{"+o+":"+n[1]+"}}",r)),n=i.exec(t);return t},a=function(o){var e,n,i;if(C.activateOnHover){if(e=t(o.target).closest(".bigfoot-footnote__button"),n='[data-footnote-identifier="'+e.attr("data-footnote-identifier")+'"]',e.hasClass("is-active"))return;e.addClass("is-hover-instantiated"),C.allowMultipleFN||(i=".bigfoot-footnote:not("+n+")",y(i)),d(".bigfoot-footnote__button"+n).addClass("is-hover-instantiated")}},x=function(o){var e,n,i;i=t(o.target),e=i.closest(".bigfoot-footnote__button"),n=i.closest(".bigfoot-footnote"),e.length>0?(o.preventDefault(),l(e)):n.length<1&&t(".bigfoot-footnote").length>0&&y()},l=function(t){var o;t.blur(),o='data-footnote-identifier="'+t.attr("data-footnote-identifier")+'"',t.hasClass("changing")||(t.hasClass("is-active")?C.allowMultipleFN?y(".bigfoot-footnote["+o+"]"):y():(t.addClass("changing"),setTimeout(function(){return t.removeClass("changing")},C.popoverCreateDelay),d(".bigfoot-footnote__button["+o+"]"),t.addClass("is-click-instantiated"),C.allowMultipleFN||y(".bigfoot-footnote:not(["+o+"])")))},d=function(o){var e,n;return e=void 0,e="string"!=typeof o&&C.allowMultipleFN?o:"string"!=typeof o?o.first():C.allowMultipleFN?t(o).closest(".bigfoot-footnote__button"):t(o+":first").closest(".bigfoot-footnote__button"),n=t(),e.each(function(){var o,i,a,s;a=t(this),s=void 0;try{return s=C.contentMarkup.replace(/\{\{FOOTNOTENUM\}\}/g,a.attr("data-footnote-number")).replace(/\{\{FOOTNOTEID\}\}/g,a.attr("data-footnote-identifier")).replace(/\{\{FOOTNOTECONTENT\}\}/g,a.attr("data-bigfoot-footnote")).replace(/\&gtsym\;/g,"&gt;").replace(/\&ltsym\;/g,"&lt;"),s=w(s,"BUTTON",a)}finally{o=t(s);try{C.activateCallback(o,a)}catch(l){}o.insertAfter(e),v[a.attr("data-footnote-identifier")]="init",o.attr("bigfoot-max-width",r(o.css("max-width"),o)),o.css("max-width",1e4),i=o.find(".bigfoot-footnote__content"),o.attr("data-bigfoot-max-height",r(i.css("max-height"),i)),T(),a.addClass("is-active"),o.find(".bigfoot-footnote__content").bindScrollHandler(),n=n.add(o)}}),setTimeout(function(){return n.addClass("is-active")},C.popoverCreateDelay),n},n=function(){var t,o;return t=document.createElement("div"),t.style.cssText="display:inline-block;padding:0;line-height:1;position:absolute;visibility:hidden;font-size:1em;",t.appendChild(document.createElement("M")),document.body.appendChild(t),o=t.offsetHeight,document.body.removeChild(t),o},r=function(t,o){return"none"===t?t=1e4:t.indexOf("rem")>=0?t=parseFloat(t)*n():t.indexOf("em")>=0?t=parseFloat(t)*parseFloat(o.css("font-size")):t.indexOf("px")>=0?(t=parseFloat(t),60>=t&&(t/=parseFloat(o.parent().css("width")))):t.indexOf("%")>=0&&(t=parseFloat(t)/100),t},t.fn.bindScrollHandler=function(){return C.preventPageScroll?(t(this).on("DOMMouseScroll mousewheel",function(o){var e,n,i,a,r,s,l,d;return n=t(this),l=n.scrollTop(),s=n[0].scrollHeight,a=parseInt(n.css("height")),e=n.closest(".bigfoot-footnote"),n.scrollTop()>0&&n.scrollTop()<10&&e.addClass("is-scrollable"),e.hasClass("is-scrollable")?(i="DOMMouseScroll"===o.type?-40*o.originalEvent.detail:o.originalEvent.wheelDelta,d=i>0,r=function(){return o.stopPropagation(),o.preventDefault(),o.returnValue=!1,!1},!d&&-i>s-a-l?(n.scrollTop(s),e.addClass("is-fully-scrolled"),r()):d&&i>l?(n.scrollTop(0),e.removeClass("is-fully-scrolled"),r()):e.removeClass("is-fully-scrolled")):void 0}),t(this)):t(this)},N=function(o){return C.deleteOnUnhover&&C.activateOnHover?setTimeout(function(){var e;return e=t(o.target).closest(".bigfoot-footnote, .bigfoot-footnote__button"),t(".bigfoot-footnote__button:hover, .bigfoot-footnote:hover").length<1?y():void 0},C.hoverDelay):void 0},u=function(t){return 27===t.keyCode?y():void 0},y=function(o,e){var n,i,a,r;return null==o&&(o=".bigfoot-footnote"),null==e&&(e=C.popoverDeleteDelay),n=t(),r=void 0,i=void 0,a=void 0,t(o).each(function(){return a=t(this),r=a.attr("data-footnote-identifier"),i=t('.bigfoot-footnote__button[data-footnote-identifier="'+r+'"]'),i.hasClass("changing")?void 0:(n=n.add(i),i.removeClass("is-active is-hover-instantiated is-click-instantiated").addClass("changing"),a.removeClass("is-active").addClass("disapearing"),setTimeout(function(){return a.remove(),delete v[r],i.removeClass("changing")},e))}),n},T=function(o){var e;C.positionContent&&(e=o?o.type:"resize",t(".bigfoot-footnote").each(function(){var o,n,i,a,r,s,l,d,f,c,u,p,g,h,b,O;return a=t(this),s=a.attr("data-footnote-identifier"),r='data-footnote-identifier="'+s+'"',n=a.find(".bigfoot-footnote__content"),o=a.siblings(".bigfoot-footnote__button"),b=_(o),d=parseFloat(a.css("margin-top")),f=+a.attr("data-bigfoot-max-height"),O=2*d+a.outerHeight(),c=1e4,g=b.bottomRoom<O&&b.topRoom>b.bottomRoom,l=v[s],g?("top"!==l&&(v[s]="top",a.addClass("is-positioned-top").removeClass("is-positioned-bottom"),a.css("transform-origin",100*b.leftRelative+"% 100%")),c=b.topRoom-d-15):(("bottom"!==l||"init"===l)&&(v[s]="bottom",a.removeClass("is-positioned-top").addClass("is-positioned-bottom"),a.css("transform-origin",100*b.leftRelative+"% 0%")),c=b.bottomRoom-d-15),a.find(".bigfoot-footnote__content").css({"max-height":Math.min(c,f)+"px"}),"resize"===e&&(p=parseFloat(a.attr("bigfoot-max-width")),i=a.find(".bigfoot-footnote__wrapper"),u=p,1>=p&&(h=function(){var o,e;return e=1e4,C.maxWidthRelativeTo&&(o=t(C.maxWidthRelativeTo),o.length>0&&(e=o.outerWidth())),Math.min(window.innerWidth,e)}(),u=h*p),u=Math.min(u,a.find(".bigfoot-footnote__content").outerWidth()+1),i.css("max-width",u+"px"),a.css({left:-b.leftRelative*u+parseFloat(o.css("margin-left"))+o.outerWidth()/2+"px"}),m(a,b.leftRelative)),parseInt(a.outerHeight())<a.find(".bigfoot-footnote__content")[0].scrollHeight?a.addClass("is-scrollable"):void 0}))},m=function(t,o){var e;null==o&&(o=.5),e=t.find(".bigfoot-footnote__tooltip"),e.length>0&&e.css("left",""+100*o+"%")},_=function(t){var o,e,n,i,a,r;return e=parseFloat(t.css("margin-left")),n=parseFloat(t.outerWidth())-e,o=parseFloat(t.outerHeight()),r=k(),a=t.offset().top-r.scrollY+o/2,i=t.offset().left-r.scrollX+n/2,{topRoom:a,bottomRoom:r.height-a,leftRoom:i,rightRoom:r.width-i,leftRelative:i/r.width,topRelative:a/r.height}},k=function(){return{width:window.innerWidth,height:window.innerHeight,scrollX:window.scrollX,scrollY:window.scrollY}},e=function(t,o,e,n,a){var r,s,l,d,f,c,u;return null==n&&(n=C.popoverDeleteDelay),null==a&&(a=!0),d=void 0,s=void 0,c=void 0,"string"==typeof t?(c="iphone"===t.toLowerCase()?"<320px":"ipad"===t.toLowerCase()?"<768px":t,s=">"===c.charAt(0)?"min":"<"===c.charAt(0)?"max":null,f=s?"("+s+"-width: "+c.substring(1)+")":c,d=window.matchMedia(f)):d=t,d.media&&"invalid"===d.media?{added:!1,mq:d,listener:null}:(u="min"===s,r="max"===s,o=o||h(a,n,u,function(t){return t.addClass("is-bottom-fixed")}),e=e||h(a,n,r,function(){}),l=function(t){t.matches?o(a,i):e(a,i)},d.addListener(l),l(d),C.breakpoints[t]={added:!0,mq:d,listener:l},C.breakpoints[t])},h=function(t,o,e,n){return function(t,i){var a;return a=void 0,t&&(a=i.close(),i.updateSetting("activateCallback",n)),setTimeout(function(){return i.updateSetting("positionContent",e),t?i.activate(a):void 0},o)}},O=function(t,o){var e,n,i,a;if(i=null,e=void 0,a=!1,"string"==typeof t)a=void 0!==C.breakpoints[t];else for(e in C.breakpoints)C.breakpoints.hasOwnProperty(e)&&C.breakpoints[e].mq===t&&(a=!0);return a&&(n=C.breakpoints[e||t],o?o({matches:!1}):n.listener({matches:!1}),n.mq.removeListener(n.listener),delete C.breakpoints[e||t]),a},F=function(t,o){var e,n;if(e=void 0,"string"==typeof t)e=C[t],C[t]=o;else{e={};for(n in t)t.hasOwnProperty(n)&&(e[n]=C[n],C[n]=t[n])}return e},g=function(t){return C[t]},t(document).ready(function(){return p(),t(document).on("mouseenter",".bigfoot-footnote__button",a),t(document).on("touchend click",x),t(document).on("mouseout",".is-hover-instantiated",N),t(document).on("keyup",u),t(window).on("scroll resize",T),t(document).on("gestureend",function(){return T()})}),i={removePopovers:y,close:y,createPopover:d,activate:d,repositionFeet:T,reposition:T,addBreakpoint:e,removeBreakpoint:O,getSetting:g,updateSetting:F}}}(jQuery)}.call(this),function(){var t=document.querySelectorAll("article img");Array.prototype.forEach.call(t,function(t){var o=t.getAttribute("alt");o&&t.insertAdjacentHTML("afterend","<figcaption><p>"+o+"</p></figcaption>")}),$.bigfoot(),$(".menu-toggle").click(function(){$(".site-navigation").slideToggle(250)}),$(window).on("resize",function(){$(this).width()>=990?$(".site-navigation").show():$(".site-navigation").hide()}),fluidvids.init({selector:["iframe","object"],players:["www.youtube.com","player.vimeo.com"]})}.call(this);